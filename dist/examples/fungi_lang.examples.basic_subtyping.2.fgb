Bundle { input: "let get_one :\n(Thk [0] foralli (X, Y, Z) : NmSet . 0 Bool -> 0 Nm [X % Z] -> 0 Nm [Y % Z] ->\n { 0 ; 0 } F Nm [X % Y % Z]) =\n{ ret thunk # b . # nxz . # nyz . if (b) { ret nxz } else { ret nyz } } ret 0", program: Der { ctx: Empty, dir: Synth, term: Let("get_one", AnnoC(Ret(ThunkAnon(Lam("b", Lam("nxz", Lam("nyz", IfThenElse(Var("b"), Ret(Var("nxz")), Ret(Var("nyz")))))))), Lift(Thk(Empty, ForallIdx("X", NmSet, Tt, ForallIdx("Y", NmSet, Tt, ForallIdx("Z", NmSet, Tt, Cons(Arrow(Ident("Bool"), Cons(Arrow(Nm(Apart(Var("X"), Var("Z"))), Cons(Arrow(Nm(Apart(Var("Y"), Var("Z"))), Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty)))))))), Ret(Nat(0))), clas: Ok(Cons(Lift(Prim(Nat)), WR(Empty, Empty))), rule: Let("get_one", Der { ctx: Empty, dir: Synth, term: AnnoC(Ret(ThunkAnon(Lam("b", Lam("nxz", Lam("nyz", IfThenElse(Var("b"), Ret(Var("nxz")), Ret(Var("nyz")))))))), Lift(Thk(Empty, ForallIdx("X", NmSet, Tt, ForallIdx("Y", NmSet, Tt, ForallIdx("Z", NmSet, Tt, Cons(Arrow(Ident("Bool"), Cons(Arrow(Nm(Apart(Var("X"), Var("Z"))), Cons(Arrow(Nm(Apart(Var("Y"), Var("Z"))), Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty)))))))), clas: Ok(Cons(Lift(Thk(Empty, ForallIdx("X", NmSet, Tt, ForallIdx("Y", NmSet, Tt, ForallIdx("Z", NmSet, Tt, Cons(Arrow(Prim(Bool), Cons(Arrow(Nm(Apart(Var("X"), Var("Z"))), Cons(Arrow(Nm(Apart(Var("Y"), Var("Z"))), Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))))))), WR(Empty, Empty))), rule: AnnoC(Der { ctx: Empty, dir: Check(Cons(Lift(Thk(Empty, ForallIdx("X", NmSet, Tt, ForallIdx("Y", NmSet, Tt, ForallIdx("Z", NmSet, Tt, Cons(Arrow(Prim(Bool), Cons(Arrow(Nm(Apart(Var("X"), Var("Z"))), Cons(Arrow(Nm(Apart(Var("Y"), Var("Z"))), Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))))))), WR(Empty, Empty))), term: Ret(ThunkAnon(Lam("b", Lam("nxz", Lam("nyz", IfThenElse(Var("b"), Ret(Var("nxz")), Ret(Var("nyz")))))))), clas: Ok(Cons(Lift(Thk(Empty, ForallIdx("X", NmSet, Tt, ForallIdx("Y", NmSet, Tt, ForallIdx("Z", NmSet, Tt, Cons(Arrow(Prim(Bool), Cons(Arrow(Nm(Apart(Var("X"), Var("Z"))), Cons(Arrow(Nm(Apart(Var("Y"), Var("Z"))), Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))))))), WR(Empty, Empty))), rule: Ret(Der { ctx: Empty, dir: Check(Thk(Empty, ForallIdx("X", NmSet, Tt, ForallIdx("Y", NmSet, Tt, ForallIdx("Z", NmSet, Tt, Cons(Arrow(Prim(Bool), Cons(Arrow(Nm(Apart(Var("X"), Var("Z"))), Cons(Arrow(Nm(Apart(Var("Y"), Var("Z"))), Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))))))), term: ThunkAnon(Lam("b", Lam("nxz", Lam("nyz", IfThenElse(Var("b"), Ret(Var("nxz")), Ret(Var("nyz"))))))), clas: Ok(Thk(Empty, ForallIdx("X", NmSet, Tt, ForallIdx("Y", NmSet, Tt, ForallIdx("Z", NmSet, Tt, Cons(Arrow(Prim(Bool), Cons(Arrow(Nm(Apart(Var("X"), Var("Z"))), Cons(Arrow(Nm(Apart(Var("Y"), Var("Z"))), Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))))))), rule: ThunkAnon(Der { ctx: Empty, dir: Check(ForallIdx("X", NmSet, Tt, ForallIdx("Y", NmSet, Tt, ForallIdx("Z", NmSet, Tt, Cons(Arrow(Prim(Bool), Cons(Arrow(Nm(Apart(Var("X"), Var("Z"))), Cons(Arrow(Nm(Apart(Var("Y"), Var("Z"))), Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty)))))), term: Lam("b", Lam("nxz", Lam("nyz", IfThenElse(Var("b"), Ret(Var("nxz")), Ret(Var("nyz")))))), clas: Ok(Cons(Arrow(Prim(Bool), Cons(Arrow(Nm(Apart(Var("X"), Var("Z"))), Cons(Arrow(Nm(Apart(Var("Y"), Var("Z"))), Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))), rule: Lam("b", Der { ctx: Var(IVar(IVar(IVar(Empty, "X", NmSet), "Y", NmSet), "Z", NmSet), "b", Prim(Bool)), dir: Check(Cons(Arrow(Nm(Apart(Var("X"), Var("Z"))), Cons(Arrow(Nm(Apart(Var("Y"), Var("Z"))), Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))), term: Lam("nxz", Lam("nyz", IfThenElse(Var("b"), Ret(Var("nxz")), Ret(Var("nyz"))))), clas: Ok(Cons(Arrow(Nm(Apart(Var("X"), Var("Z"))), Cons(Arrow(Nm(Apart(Var("Y"), Var("Z"))), Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))), rule: Lam("nxz", Der { ctx: Var(Var(IVar(IVar(IVar(Empty, "X", NmSet), "Y", NmSet), "Z", NmSet), "b", Prim(Bool)), "nxz", Nm(Apart(Var("X"), Var("Z")))), dir: Check(Cons(Arrow(Nm(Apart(Var("Y"), Var("Z"))), Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), WR(Empty, Empty))), term: Lam("nyz", IfThenElse(Var("b"), Ret(Var("nxz")), Ret(Var("nyz")))), clas: Ok(Cons(Arrow(Nm(Apart(Var("Y"), Var("Z"))), Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), WR(Empty, Empty))), rule: Lam("nyz", Der { ctx: Var(Var(Var(IVar(IVar(IVar(Empty, "X", NmSet), "Y", NmSet), "Z", NmSet), "b", Prim(Bool)), "nxz", Nm(Apart(Var("X"), Var("Z")))), "nyz", Nm(Apart(Var("Y"), Var("Z")))), dir: Check(Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), term: IfThenElse(Var("b"), Ret(Var("nxz")), Ret(Var("nyz"))), clas: Ok(Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), rule: IfThenElse(Der { ctx: Var(Var(Var(IVar(IVar(IVar(Empty, "X", NmSet), "Y", NmSet), "Z", NmSet), "b", Prim(Bool)), "nxz", Nm(Apart(Var("X"), Var("Z")))), "nyz", Nm(Apart(Var("Y"), Var("Z")))), dir: Synth, term: Var("b"), clas: Ok(Prim(Bool)), rule: Var("b"), vis: DerVis { tmfam: "Val", local_err: false } }, Der { ctx: Var(Var(Var(IVar(IVar(IVar(Empty, "X", NmSet), "Y", NmSet), "Z", NmSet), "b", Prim(Bool)), "nxz", Nm(Apart(Var("X"), Var("Z")))), "nyz", Nm(Apart(Var("Y"), Var("Z")))), dir: Check(Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), term: Ret(Var("nxz")), clas: Ok(Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), rule: Ret(Der { ctx: Var(Var(Var(IVar(IVar(IVar(Empty, "X", NmSet), "Y", NmSet), "Z", NmSet), "b", Prim(Bool)), "nxz", Nm(Apart(Var("X"), Var("Z")))), "nyz", Nm(Apart(Var("Y"), Var("Z")))), dir: Check(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), term: Var("nxz"), clas: Ok(Nm(Apart(Var("X"), Var("Z")))), rule: Var("nxz"), vis: DerVis { tmfam: "Val", local_err: false } }), vis: DerVis { tmfam: "Exp", local_err: false } }, Der { ctx: Var(Var(Var(IVar(IVar(IVar(Empty, "X", NmSet), "Y", NmSet), "Z", NmSet), "b", Prim(Bool)), "nxz", Nm(Apart(Var("X"), Var("Z")))), "nyz", Nm(Apart(Var("Y"), Var("Z")))), dir: Check(Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), term: Ret(Var("nyz")), clas: Ok(Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), rule: Ret(Der { ctx: Var(Var(Var(IVar(IVar(IVar(Empty, "X", NmSet), "Y", NmSet), "Z", NmSet), "b", Prim(Bool)), "nxz", Nm(Apart(Var("X"), Var("Z")))), "nyz", Nm(Apart(Var("Y"), Var("Z")))), dir: Check(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), term: Var("nyz"), clas: Ok(Nm(Apart(Var("Y"), Var("Z")))), rule: Var("nyz"), vis: DerVis { tmfam: "Val", local_err: false } }), vis: DerVis { tmfam: "Exp", local_err: false } }), vis: DerVis { tmfam: "Exp", local_err: false } }), vis: DerVis { tmfam: "Exp", local_err: false } }), vis: DerVis { tmfam: "Exp", local_err: false } }), vis: DerVis { tmfam: "Exp", local_err: false } }), vis: DerVis { tmfam: "Val", local_err: false } }), vis: DerVis { tmfam: "Exp", local_err: false } }, Lift(Thk(Empty, ForallIdx("X", NmSet, Tt, ForallIdx("Y", NmSet, Tt, ForallIdx("Z", NmSet, Tt, Cons(Arrow(Prim(Bool), Cons(Arrow(Nm(Apart(Var("X"), Var("Z"))), Cons(Arrow(Nm(Apart(Var("Y"), Var("Z"))), Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty)))))))), vis: DerVis { tmfam: "Exp", local_err: false } }, Der { ctx: Var(Empty, "get_one", Thk(Empty, ForallIdx("X", NmSet, Tt, ForallIdx("Y", NmSet, Tt, ForallIdx("Z", NmSet, Tt, Cons(Arrow(Prim(Bool), Cons(Arrow(Nm(Apart(Var("X"), Var("Z"))), Cons(Arrow(Nm(Apart(Var("Y"), Var("Z"))), Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))))))), dir: Synth, term: Ret(Nat(0)), clas: Ok(Cons(Lift(Prim(Nat)), WR(Empty, Empty))), rule: Ret(Der { ctx: Var(Empty, "get_one", Thk(Empty, ForallIdx("X", NmSet, Tt, ForallIdx("Y", NmSet, Tt, ForallIdx("Z", NmSet, Tt, Cons(Arrow(Prim(Bool), Cons(Arrow(Nm(Apart(Var("X"), Var("Z"))), Cons(Arrow(Nm(Apart(Var("Y"), Var("Z"))), Cons(Lift(Nm(Apart(Apart(Var("X"), Var("Y")), Var("Z")))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))), WR(Empty, Empty))))))), dir: Synth, term: Nat(0), clas: Ok(Prim(Nat)), rule: Nat(0), vis: DerVis { tmfam: "Val", local_err: false } }), vis: DerVis { tmfam: "Exp", local_err: false } }), vis: DerVis { tmfam: "Exp", local_err: false } }, traces: [] }